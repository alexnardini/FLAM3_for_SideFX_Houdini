/*  
 /  Title:      SideFX Houdini FRACTAL FLAME generator: 2D
 /  Author:     Alessandro Nardini
 /  date:       October 2020, Last revised April 2021
 /
 /  info:       Based on the original: "The Fractal Flame Algorithm"
 /  Authors:    Scott Draves, Erik Reckase
 /  Weblink:    https://flam3.com/flame_draves.pdf
 /  Date:       September 2003, Last revised November 2008
 /
 /  Name:       TheFractalFlameAlgorithm    "VEX"
 /
 /  Comment:    Variation ACTIVE collect
*/


#ifndef VOP_OP
#define VOP_OP
#endif
#ifndef VOP_CVEX
#define VOP_CVEX
#endif

#pragma opname  "TFFAvactive"
#pragma oplabel "TFFAvactive"
#pragma opmininputs 1
#pragma opmaxinputs 1

void
_TFFAvactive(int _bound_VACTIVE[]; float _bound_IW[])
{
    int iter_f = chi("../flamefunc");
    int vactive[] = {};
    float IW[] = {};
    for(int i=0; i<iter_f; i++){
        string IDX = itoa(i+1);
        append(vactive, chi(concat("../vactive_", IDX)));
        append(IW, chf(concat("../iw_", IDX)));
    }
    _bound_VACTIVE = vactive;
    _bound_IW = IW;
}

cvex
TFFAvactive(export int VACTIVE[] = {};
            export float IW[] = {})
{
    _TFFAvactive(VACTIVE, IW);
}
